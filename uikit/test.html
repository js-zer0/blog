<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script>
    	(function ctrlSelect() {
    		var oMachine = document.getElementById('machine_type_tree');
    		var oMachineItems = oMachine.children, n = 0;

    		for(var i = 0, len = oMachineItems.length; i < len; i++) {
    			(function (index) {
    				var allSelect = document.getElementById('product_type_' + (i + 1));
	    			var allSelectItems = document.getElementById('collapse-' + (i + 1)).children;

	    			for(var m = 0; m < allSelectItems.length; m++) {
	    				allSelectItems[m].onclick = function () {
	    					if(allSelect.checked) {
	    						allSelect.checked = false;
	    					}
	    					else {
                                for(var q = 0; q < allSelectItems.length; q++) {
                                    if(allSelectItems[q].checked) n++;
                                }
                                if(n === allSelectItems.length) {
                                    allSelect.checked = true;
                                }
                                else {
                                    n = 0;
                                }
	    					}
	    				}
	    			}

	    			allSelect.onclick = function () {
	    				for(var j = 0; j < allSelectItems.length; j++) {
    						allSelectItems[j].checked = this.checked;
    					}
	    			}
    			})(i);
    		}
    	})();
    </script>
</head>

<body>
    <label for="field-1" class="col-sm-3 control-label">关联产品和机型：</label>
    <div class="col-sm-5" id="machine_type_tree">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
					<input class="product" name="product_type_1" id="product_type_1" type="checkbox">
					<a data-toggle="collapse" data-parent="#accordion-test-2" href="#collapse-1" class="collapsed">
						<span class="ky_list ky_readyPushTime">1：乐视</span>
					</a>
				</h4>
            </div>
            <div id="collapse-1" class="panel-collapse collapse" style="height: 0px;">

                <input class="machine" name="machine_type" id="machine_type_1" value="1" type="checkbox">1-121

                <input class="machine" name="machine_type" id="machine_type_1" value="2" type="checkbox">1-3212

            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
											<input class="product" name="product_type_2" id="product_type_2" type="checkbox">
											<a data-toggle="collapse" data-parent="#accordion-test-2" href="#collapse-2" class="collapsed">
												<span class="ky_list ky_readyPushTime">2：小米</span>
											</a>
										</h4>
            </div>
            <div id="collapse-2" class="panel-collapse collapse" style="height: 0px;">

                <input class="machine" name="machine_type" id="machine_type_2" value="3" type="checkbox">2-32432

                <input class="machine" name="machine_type" id="machine_type_2" value="4" type="checkbox">2-4341

                <input class="machine" name="machine_type" id="machine_type_2" value="5" type="checkbox">2-4341

            </div>
        </div>



    </div>

</body>

</html>
